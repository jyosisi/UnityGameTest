{
  "__type__": "cc.TextAsset",
  "_name": "roomproto",
  "text": "package proto;\r\n\r\noption optimize_for = LITE_RUNTIME;\r\noption java_package = \"com.aemobile.gin.room.bean\";\r\noption java_outer_classname = \"GinRoomProto\";\r\n\r\nimport \"commonproto.proto\";\r\n\r\n//---------------------------------------------------------------game--------------------------------------------------\r\n\r\n// standup:SFSEventType.PLAYER_TO_SPECTATOR\r\nmessage UserCards{\r\n    required int32 id = 1; // playId\r\n    repeated int32 cards = 2;\r\n    optional int32 degree = 3;//牌面等级\r\n    optional int32 num = 4;//使用等级次数\r\n}\r\nmessage S2C_Next{\r\n    required int32 next_id = 1;//下个开始用户的playerId\r\n    required int32 wait_time = 2;//下个用户的操作等待时间\r\n\r\n}\r\n\r\n//CMD starttime 准备开始\r\n// Common_I\r\n\r\n//CMD ready 准备完毕\r\n\r\n//S2C_Next\r\n\r\n//------------CMD bet\r\n//Common_I 下注金额\r\n//Common_L 下注金额(release4之后)\r\n//S2C_Next   cmd next\r\n\r\n//---------------------------------------------------------------social--------------------------------------------------\r\n\r\n\r\n//------------CMD sendmessage\r\nmessage C2S_Msg{\r\n    repeated int64 id = 1;//接收者 username\r\n    required string  msg =2;\r\n}\r\nmessage S2C_Msg{\r\n    required int64 id = 1;//发送者username\r\n    required string  msg =2;\r\n    required string name = 3;\r\n}\r\n//---------------------------------------------------------------store--------------------------------------------------\r\n//------------CMD sendgift\r\nmessage C2S_Gift{\r\n    repeated int64 accpet_id = 1;//userName\r\n    required int32 gift_id =2;\r\n}\r\nmessage S2C_Gift{\r\n    repeated int64 accept_id = 1;//userName\r\n    required int32 gift_id =2;\r\n    required int64 send_id =3;//userName\r\n}\r\n\r\n//------------CMD giftprice\r\n//Common_IS 价格列表\r\n\r\n//------------CMD tip\r\n//Common_I tip tip金额\r\nmessage S2C_Tip{\r\n    required int64 id = 1;//username\r\n    required int32 chip = 2;\r\n}\r\n//-------CMD switchdealer 换荷官\r\n//Common_I(荷官ID)\r\n//Common_I(返回荷官ID)\r\n\r\n//-------CMD buy\r\n//Common_I 大厅商店=1/余额不够下注弹框=2/房间商店=3/余额不足弹框=4/促销=5\r\n//Common_S payload字符串\r\n\r\n//-------CMD nativeAd 推送\r\nmessage S2C_NativeAd{\r\n    required int32 amount = 1; // 0 出广告, 其他\r\n    optional string chipload = 2; //payload字符串\r\n}\r\n//-------CMD claimnativeAd\r\n//Common_S chipload 字符串\r\n//error / user variable update\r\n\r\n//-------CMD getEnoughItem  chips不足推送商品\r\n//无参\r\n//Common_S 商品id\r\n\r\n//---------------------------------------------------------------test--------------------------------------------------\r\n//------CMD testcards\r\nmessage C2S_TestC{\r\n    repeated int32 card = 1;\r\n}\r\n//------CMD chipschange 机器人加钱\r\n//无参\r\n//error / user variable update\r\n\r\n\r\n//Room Variable\r\n//gift：道具基准价格\r\n//tip：荷官chips\r\n//sc:要达到的分数\r\n//ba:入场费\r\n//pl:当前奖池\r\n//ps:int:pass阶段 0PASS中 1PASS刚结束 2非PASS阶段;\r\n\r\n//User Variable\r\n//cp:long:chips  当前金额\r\n//st:int:status  当前状态WAIT(1),INGAME(2),CHECKWIN(3),DECLARE(4),DROPEDFIRST(5),DROPED(6),WIN(7),FACKWIN(8);\r\n//wc:long:winchips 在房间内赢的钱\r\n//wh:long:winhands 在房间内赢的局数\r\n//gp:gin rummy point value 当前的point value\r\n\r\n\r\n\r\n\r\n\r\n//------CMD rummyjis 主动\r\nmessage S2C_Rummy_Join{\r\n    message Player{\r\n        required int32 playerId = 1;//玩家id\r\n        optional int32 score= 2;//已结算分数\r\n        optional int32 status= 3;//当前状态\r\n        optional int32 overtime= 4;//超时次数\r\n    }\r\n    required bool isStart= 8;//玩家是否开始\r\n    optional int64 remainTime = 9;//下一个操作等待时间 / 开始等待时间\r\n    optional int32 bankerId = 1;//庄家playerId\r\n    optional int32 nextId = 2;//下一个开始操作playerId\r\n    repeated int32 commonCard = 3;//弃牌堆的牌\r\n    optional int32 upcardCard = 4;//upcard\r\n    repeated Player players = 5;//当前局开始的玩家\r\n    optional int32 roundId = 6;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    optional int32 leftover= 7; //Cards剩牌数\r\n    optional int32 collid = 10; //收藏品\r\n    repeated int32 cards = 13; //牌（玩家自己的13张牌）\r\n    optional bool isFirst= 14;//是否第一轮\r\n    optional int32 status= 15;//房间状态none(0),waitforpass(1),,waitfordraw(2),waitfordiscard(3),waitforotherdeclare(5),end(6),\r\n    repeated bool isready = 16; //是否ready\r\n}\r\n\r\nmessage S2C_Rummy_Next{\r\n    required int32 next_id = 1;//下个开始用户的playerId, -1 所有人declare\r\n    required int32 wait_time = 2;//下个用户的操作等待时间\r\n    required int32 roundId = 3;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    optional int32 firstTime = 4;//第一阶段时间，包含在waittime之内\r\n}\r\n\r\n//CMD starttime\r\n// Common_I  //还有几秒开始游戏\r\n\r\n//------------CMD rummystart 开始发牌的顺序\r\nmessage S2C_Rummy_Start{\r\n    required int32 bankerId = 1;//庄家\r\n    repeated int32 cards = 2; //牌（玩家自己的13张牌）\r\n    required int32 commonCard = 3;//弃牌堆顶层的牌\r\n    repeated int32 playersId = 5;//当前局开始的玩家id列表，按照座位号排序\r\n    required int32 roundId = 6;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    required int32 leftover= 7; //Cards剩牌数\r\n    optional int32 collid = 8; //收藏品\r\n}\r\n//------------CMD rummynext 下一个玩家\r\n//S2C_Next\r\n\r\n//-----------CMD rummydrop 弃牌\r\n//无参\r\nmessage S2C_Rummy_Drop{\r\n    required int32 playerId = 1;//弃牌玩家的ID\r\n    required int32 roundId = 2;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    optional int64 num = 3;//非赢家积分获得情况负数\r\n}\r\n//error:NOT_IN_DRAW_ERROR(4302, \"Not draw turn.\"),\r\n//error:NOT_YOUR_TURN(4101, \"Not your turn.\"),\r\n//error:NOT_IN_GAME(4102, \"You are not in game.\"),\r\n//error:GAME_NOT_START(4105, \"Game not started.\"),\r\n\r\n//------------CMD rummydraw 抓牌\r\n//Common_Boolean:true抓剩牌堆的牌 false抓弃牌堆最上面那张牌\r\n\r\nmessage S2C_Rummy_Draw{\r\n    required int32 playerId = 1;//抓牌玩家的ID\r\n    required bool style= 2;//true抓剩牌堆的牌 false抓弃牌堆最上面那张牌\r\n    optional int32 card = 3;//若是自己则card为抓到的牌，若是别人则不需要card\r\n    required int32 roundId = 4;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    optional int32 leftover= 5; //style=true Cards剩牌数\r\n    optional int32 topdiscard = 6; //style=false 弃牌堆顶的牌\r\n    optional bool overtime= 7;//超时\r\n}\r\n//error:DRAW_ERROR(4301, \"no card there.\"),\r\n//error:NOT_IN_DRAW_ERROR(4302, \"Not draw turn.\"),\r\n//error:NOT_YOUR_TURN(4101, \"Not your turn.\"),\r\n//error:NOT_IN_GAME(4102, \"You are not in game.\"),\r\n//error:GAME_NOT_START(4105, \"Game not started.\"),\r\n\r\n//------------CMD rummydiscard 打牌\r\nmessage C2S_Rummy_Discard{\r\n    required int32 card = 1; //打出的牌\r\n    repeated int32 needs = 2;//需要的卡片\r\n    optional C2S_Rummy_Declare groups = 3; //\r\n}\r\n\r\nmessage S2C_Rummy_Discard{\r\n    required int32 playerId = 1;//打牌玩家\r\n    required int32 card = 2;//打出的牌, 弃牌堆顶的牌\r\n    required int32 roundId = 3;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    optional bool overtime= 4;//超时\r\n}\r\n\r\n//error:DISCARD_ERROR(4303, \"do not have that card.\"),\r\n//error:NOT_IN_DISCARD_ERROR(4304, \"Not discard turn.\"),\r\n//error:NOT_YOUR_TURN(4101, \"Not your turn.\"),\r\n//error:NOT_IN_GAME(4102, \"You are not in game.\"),\r\n//error:GAME_NOT_START(4105, \"Game not started.\"),\r\n\r\nmessage Group {\r\n    required int32 style = 1;//组合类型 1 顺子 2 三张 3 散牌\r\n    repeated int32 cards = 2;\r\n}\r\n\r\n//------------CMD rummytowin 胡牌\r\nmessage C2S_Rummy_Towin{\r\n    required int32 card = 1;//打出的牌\r\n    repeated Group group = 2;//牌的组合情况\r\n    required bool result= 3;//true胡 false诈胡meizu\r\n}\r\n\r\n//S2C_Rummy_Discard\r\n//error:DISCARD_ERROR(4303, \"do not have that card.\"),\r\n//error:NOT_IN_DISCARD_ERROR(4304, \"Not discard turn.\"),\r\n//error:NOT_YOUR_TURN(4101, \"Not your turn.\"),\r\n//error:NOT_IN_GAME(4102, \"You are not in game.\"),\r\n//error:GAME_NOT_START(4105, \"Game not started.\"),\r\n\r\n//------------CMD rummydeclarewin 胡牌玩家提交最终组合\r\nmessage C2S_Rummy_Declare{\r\n    repeated Group group = 1;//牌的组合情况\r\n    optional bool result= 2;//true胡 false诈胡meizu (胡牌时)\r\n}\r\nmessage S2C_Rummy_Declare{\r\n    required int32 playerId = 1;//打牌玩家\r\n    optional bool result= 2;//true胡 false诈胡meizu\r\n    required int32 roundId = 3;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    optional int64 num = 4;//非赢家积分获得情况负数\r\n}\r\n//error:NOT_IN_DECLARE_ERROR(4306, \"Not declare turn.\"),\r\n//error:NOT_YOUR_TURN(4101, \"Not your turn.\"),\r\n//error:NOT_IN_GAME(4102, \"You are not in game.\"),\r\n//error:GAME_NOT_START(4105, \"Game not started.\"),\r\n\r\n//------------CMD rummydeclaretemp 其他玩家提交临时组合\r\n//message C2S_Rummy_Declare\r\n//error:NOT_IN_GAME(4102, \"You are not in game.\"),\r\n//error:GAME_NOT_START(4105, \"Game not started.\"),\r\n\r\n//------------CMD rummydeclaretemp 客户端提交玩家卡片和服务端不符时，服务器推送\r\n//message Common_IS 玩家实际卡片\r\n\r\n//------------CMD rummydeclare 其他玩家提交最终组合\r\n//message C2S_Rummy_Declare\r\n//message S2C_Rummy_Declare\r\n//error:NOT_IN_DECLARE_ERROR(4306, \"Not declare turn.\"),\r\n//error:NOT_IN_GAME(4102, \"You are not in game.\"),\r\n//error:GAME_NOT_START(4105, \"Game not started.\"),\r\n\r\n//-------CMD rummymydrop  主动\r\n//S2C_Common_Change chipschange + userId\r\n\r\n//---CMD ginpass\r\n//C2S_Rummy_Declare\r\n//Common_IS playerid + 1=超时（不是超时只有1个数字）\r\n\r\n\r\n//游戏结束 结算积分\r\n//------------CMD rummyshowintegral\r\nmessage S2C_Rummy_ShowIntegral{\r\n    message GinLayoff{\r\n        required int32 playerId = 1;//被layoff玩家id\r\n        required int32 groupIdx = 2;//对方玩家牌组中的索引\r\n        repeated int32 cards=3;//可layoff的牌\r\n    }\r\n    message GinResult {\r\n        required int32 playerId = 1;//玩家id\r\n        required int32 num = 2;//散牌得分\r\n        repeated Group group = 3;//牌的组合情况\r\n        required int64 userId = 4;//玩家用户id\r\n        optional int32 finalscore = 5;//pool 分数\r\n        optional int32 undercut=7;//获得积分\r\n        optional int32 gin=8;//获得积分\r\n        repeated GinLayoff layoffs=10;\r\n    }\r\n    repeated GinResult results = 1; // 下发所有玩家的胜负情况\r\n    required int32 roundId = 2;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    required int32 knockId = 3;//发起knock的玩家id\r\n    optional int32 time = 4;//等待时间\r\n}\r\n\r\n//------------CMD rummyfinish\r\nmessage S2C_Rummy_End{\r\n    required int32 exp = 1;\r\n    required S2C_Common_ExpBar expbar = 2;\r\n    required int32 roundId = 3;\r\n}\r\n\r\n//------------CMD ginresult\r\nmessage S2C_Gin_Result{\r\n    required int32 roundId = 3;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    required int32 order = 1;//名次\r\n    optional int64 win = 2;//奖励\r\n    optional int32 collid = 4;//收藏品\r\n    optional int32 collnum = 5;//收藏品数量\r\n    optional int32 time = 6;//等待时间\r\n}\r\n\r\n//------------CMD gintourresult\r\nmessage S2C_Gin_TourResult{\r\n    required int32 heart = 1; //缴费者的红心数\r\n    required int64 score = 2; //缴费者的积分\r\n    required int64 totalscore = 3; //总积分\r\n    required int64 pool=4;//总奖池\r\n    optional int32 collid = 5;//收藏品\r\n    optional int32 collnum = 6;//收藏品数量\r\n    optional int32 mywins = 7; //连赢数量\r\n    required int64 gamescore = 8; //游戏积分\r\n    required int64 gametotal = 9; //连赢加成后的积分\r\n}\r\n\r\n\r\n\r\n//------------CMD kick //踢出房间"
}