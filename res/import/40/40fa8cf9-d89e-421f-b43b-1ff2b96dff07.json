{
  "__type__": "cc.TextAsset",
  "_name": "rummyproto",
  "text": "package proto;\r\n\r\noption optimize_for = LITE_RUNTIME;\r\noption java_package = \"com.aemobile.patti.room.bean\";\r\noption java_outer_classname = \"RummyRoomProto\";\r\n\r\nimport \"roomproto.proto\";\r\nimport \"commonproto.proto\";\r\n\r\n//---------------------------------------------------------------game--------------------------------------------------\r\n//Room Variable\r\n//gift：道具基准价格\r\n//tip：荷官chips\r\n//jc：joker牌\r\n//mb：maxBlinds = Point Value Boot\r\n//ba: bootAmount = 初始Point Value\r\n//-------------dealrummy\r\n//ba:bootAmount = 带入筹码\r\n//tg = 局数\r\n//tp = 玩家人数\r\n//cg = 当前局数\r\n//cl = 第一名奖励\r\n//-------------poolrummy\r\n//ba:bootAmount = 入场费\r\n//tg = 分数上限\r\n//tp = 玩家人数\r\n//cg = 当前局数\r\n//cl = 返奖率\r\n\r\n//User Variable\r\n//cp:int:chips  当前金额\r\n//st:int:status  当前状态WAIT(1),INGAME(2),CHECKWIN(3),DECLARE(4),DROPEDFIRST(5),DROPED(6),WIN(7),FACKWIN(8);\r\n//wc:long:winchips 在房间内赢的钱\r\n//wh:long:winhands 在房间内赢的局数\r\n//brp:bet rummy point value 当前的point value\r\n//drc:deal rummy 带入的钱\r\n//prs：pool rummy 分数\r\n//pwc：pool rummy 房间内赢的钱\r\n\r\n\r\n\r\n//------CMD rummyjis 主动\r\nmessage S2C_Rummy_Join{\r\n    message Player{\r\n        required int32 playerId = 1;//玩家id\r\n        optional int32 score= 2;//已结算分数\r\n\toptional int32 status= 3;//当前状态\r\n    }\r\n    required bool isStart= 8;//玩家是否开始\r\n    optional int64 remainTime = 9;//下一个操作等待时间 / 开始等待时间\r\n    optional int32 bankerId = 1;//庄家playerId\r\n    optional int32 nextId = 2;//下一个开始操作playerId\r\n    repeated int32 commonCard = 3;//弃牌堆的牌\r\n    repeated Player players = 5;//当前局开始的玩家\r\n    optional int32 roundId = 6;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    optional int32 leftover= 7; //Cards剩牌数\r\n    optional int32 pool= 10; //奖池里的筹码数\r\n    repeated int32 cards = 13; //牌（玩家自己的13张牌）\r\n    optional bool isFirst= 14;//是否第一轮\r\n    optional int32 status= 15;//房间状态none(1),waitfordraw(2),waitfordiscard(3),waitforwinerdeclare(4),waitforotherdeclare(5),end(6),\r\n}\r\n\r\nmessage S2C_Rummy_Next{\r\n    required int32 next_id = 1;//下个开始用户的playerId, -1 所有人declare\r\n    required int32 wait_time = 2;//下个用户的操作等待时间\r\n    required int32 roundId = 3;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n}\r\n\r\n//CMD starttime\r\n// Common_I  //还有几秒开始游戏\r\n\r\n//------------CMD rummystart 开始发牌的顺序\r\nmessage S2C_Rummy_Start{\r\n    required int32 bankerId = 1;//庄家\r\n    repeated int32 cards = 2; //牌（玩家自己的13张牌）\r\n    required int32 commonCard = 3;//弃牌堆顶层的牌\r\n    repeated int32 playersId = 5;//当前局开始的玩家id列表，按照座位号排序\r\n    required int32 roundId = 6;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    required int32 leftover= 7; //Cards剩牌数\r\n}\r\n//------------CMD rummynext 下一个玩家\r\n//S2C_Next\r\n\r\n//-----------CMD rummydrop 弃牌\r\n//无参\r\nmessage S2C_Rummy_Drop{\r\n    required int32 playerId = 1;//弃牌玩家的ID\r\n    required int32 roundId = 2;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    optional int64 num = 3;//非赢家积分获得情况负数\r\n}\r\n//error:NOT_IN_DRAW_ERROR(4302, \"Not draw turn.\"),\r\n//error:NOT_YOUR_TURN(4101, \"Not your turn.\"),\r\n//error:NOT_IN_GAME(4102, \"You are not in game.\"),\r\n//error:GAME_NOT_START(4105, \"Game not started.\"),\r\n\r\n//------------CMD rummydraw 抓牌\r\n//Common_Boolean:true抓剩牌堆的牌 false抓弃牌堆最上面那张牌\r\n\r\nmessage S2C_Rummy_Draw{\r\n    required int32 playerId = 1;//抓牌玩家的ID\r\n    required bool style= 2;//true抓剩牌堆的牌 false抓弃牌堆最上面那张牌\r\n    optional int32 card = 3;//若是自己则card为抓到的牌，若是别人则不需要card\r\n    required int32 roundId = 4;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    optional int32 leftover= 5; //style=true Cards剩牌数\r\n    optional int32 topdiscard = 6; //style=false 弃牌堆顶的牌\r\n}\r\n//error:DRAW_ERROR(4301, \"no card there.\"),\r\n//error:NOT_IN_DRAW_ERROR(4302, \"Not draw turn.\"),\r\n//error:NOT_YOUR_TURN(4101, \"Not your turn.\"),\r\n//error:NOT_IN_GAME(4102, \"You are not in game.\"),\r\n//error:GAME_NOT_START(4105, \"Game not started.\"),\r\n\r\n//------------CMD rummydiscard 打牌\r\n//Common_I:打出的牌\r\n\r\n//------------CMD rummydiscard 打牌 (bet rummy)\r\nmessage C2S_Rummy_Discard{\r\n   required int32 card = 1;//打出的牌, 弃牌堆顶的牌\r\n   optional int64 pv= 2;//增加后的point value\r\n}\r\n\r\nmessage S2C_Rummy_Discard{\r\n    required int32 playerId = 1;//打牌玩家\r\n    required int32 card = 2;//打出的牌, 弃牌堆顶的牌\r\n    required int32 roundId = 3;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    optional int64 pv= 4;//增加后的point value\r\n}\r\n\r\n//error:DISCARD_ERROR(4303, \"do not have that card.\"),\r\n//error:NOT_IN_DISCARD_ERROR(4304, \"Not discard turn.\"),\r\n//error:NOT_YOUR_TURN(4101, \"Not your turn.\"),\r\n//error:NOT_IN_GAME(4102, \"You are not in game.\"),\r\n//error:GAME_NOT_START(4105, \"Game not started.\"),\r\n\r\nmessage Group {\r\n    required int32 style = 1;//组合类型 1 顺子 2 三张 3 散牌\r\n    repeated int32 cards = 2;\r\n}\r\n\r\nmessage RummyGroup {\r\n    optional Group firstlife = 1;//1st life 组合\r\n    optional Group secondlife = 2;//2nd life 组合\r\n    repeated Group otherlife = 3; //剩下的组合 可能是顺子和三张以及散牌各种组合\r\n}\r\n\r\n//------------CMD rummytowin 胡牌\r\nmessage C2S_Rummy_Towin{\r\n    required int32 card = 1;//打出的牌\r\n    required RummyGroup group = 2;//牌的组合情况\r\n    required bool result= 3;//true胡 false诈胡meizu\r\n}\r\n\r\n//S2C_Rummy_Discard\r\n//error:DISCARD_ERROR(4303, \"do not have that card.\"),\r\n//error:NOT_IN_DISCARD_ERROR(4304, \"Not discard turn.\"),\r\n//error:NOT_YOUR_TURN(4101, \"Not your turn.\"),\r\n//error:NOT_IN_GAME(4102, \"You are not in game.\"),\r\n//error:GAME_NOT_START(4105, \"Game not started.\"),\r\n\r\n//------------CMD rummydeclarewin 胡牌玩家提交最终组合\r\nmessage C2S_Rummy_Declare{\r\n    required RummyGroup group = 1;//牌的组合情况\r\n    optional bool result= 2;//true胡 false诈胡meizu (胡牌时)\r\n}\r\nmessage S2C_Rummy_Declare{\r\n    required int32 playerId = 1;//打牌玩家\r\n    optional bool result= 2;//true胡 false诈胡meizu\r\n    required int32 roundId = 3;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n    optional int64 num = 4;//非赢家积分获得情况负数\r\n}\r\n//error:NOT_IN_DECLARE_ERROR(4306, \"Not declare turn.\"),\r\n//error:NOT_YOUR_TURN(4101, \"Not your turn.\"),\r\n//error:NOT_IN_GAME(4102, \"You are not in game.\"),\r\n//error:GAME_NOT_START(4105, \"Game not started.\"),\r\n\r\n//------------CMD rummydeclaretemp 其他玩家提交临时组合\r\n//message C2S_Rummy_Declare\r\n//error:NOT_IN_GAME(4102, \"You are not in game.\"),\r\n//error:GAME_NOT_START(4105, \"Game not started.\"),\r\n\r\n//------------CMD rummydeclaretemp 客户端提交玩家卡片和服务端不符时，服务器推送\r\n//message Common_IS 玩家实际卡片\r\n\r\n//------------CMD rummydeclare 其他玩家提交最终组合\r\n//message C2S_Rummy_Declare\r\n//message S2C_Rummy_Declare\r\n//error:NOT_IN_DECLARE_ERROR(4306, \"Not declare turn.\"),\r\n//error:NOT_IN_GAME(4102, \"You are not in game.\"),\r\n//error:GAME_NOT_START(4105, \"Game not started.\"),\r\n\r\n//------------CMD rummyfinish 主动\r\nmessage S2C_Rummy_End{\r\n    required int32 exp = 1;\r\n    required S2C_Common_ExpBar expbar = 2;\r\n    optional S2C_Common_Change bonus = 3;\r\n    required int32 roundId = 4;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n}\r\n\r\n//游戏结束 结算积分\r\n//------------CMD rummyshowintegral\r\nmessage S2C_Rummy_ShowIntegral{\r\n    message Integral {\r\n        required int32 playerId = 1;//玩家id\r\n        required int64 num = 2;//积分获得情况 可为负数\r\n        optional RummyGroup group = 3;//牌的组合情况\r\n        required int64 userId = 4;//玩家用户id\r\n\toptional int64 finalscore = 5;//pool 分数\r\n    }\r\n    repeated Integral integral = 1; // 下发所有玩家的胜负情况，按座位号排序\r\n    required int32 roundId = 2;//当前局的Id，用来处理玩家中途离开，又返回的情况\r\n}\r\n\r\n//-------CMD rummymydrop  主动\r\n//S2C_Common_Change chipschange + userId\r\n\r\n//------------CMD rummytest\r\n\r\n\r\n//------------CMD dealrummycontinue\r\n//无参\r\n//success/error\r\n\r\n//------------CMD dealrummyresult\r\nmessage S2C_Rummy_DealResult{\r\n\trequired int32 order = 1;//名次\r\n}\r\n\r\n//------------CMD poolrummyresult\r\nmessage S2C_Rummy_PoolResult{\r\n\trequired int32 order = 1;//名次\r\n\toptional int64 win = 2;//奖励\r\n}\r\n\r\n//------------CMD poolrummyscore\r\n//无参\r\nmessage S2C_Rummy_PoolScore{\r\n    message Pool_Score {\r\n        required int64 id = 1;//玩家id\r\n        repeated int32 num = 2;//积分\r\n    }\r\n    repeated Pool_Score users = 1; // 下发所有玩家\r\n}\r\n\r\n\r\n//------------CMD needswtich\r\n\r\n\r\n\r\n//-----------rummy tournament-----------\r\n//加入房间  rummytour\r\n//----------------CMD  rummytour\r\n//推送\r\nmessage S2C_RummyTour_List{\r\n\trepeated S2C_RummyTour tour = 1; //列表\r\n\tmessage S2C_RummyTour{\r\n\t\trequired int32 id = 1;//id\r\n\t\trequired int32 starttime = 2;//开始时间\r\n\t\trequired int32 players = 3;//总人数\r\n\t\trequired int32 inplayers = 4;//报名人数\r\n\t\trequired int32 rewards = 5;//总奖励\r\n\t\trequired int32 status = 6;//1=open 2=not start 2=running 3=completed\r\n\t\trequired int32 fee = 7;//报名费\r\n\t\trequired int32 type = 8;//1=Free 2=Cash 3=League\r\n\t}\r\n}\r\n\r\n//----------------CMD  rummytourupdate\r\n//rummytour房间内的人推送\r\nmessage S2C_RummyTour_Update{\r\n\trequired int32 id = 1;//id\r\n\toptional int32 inplayers = 2;//报名人数\r\n\toptional int32 status = 3;//1=open 2=not start 2=running 3=completed\r\n}\r\n\r\n//----------------CMD  signup\r\nmessage C2S_RummyTour_Signup{\r\n\trequired int32 id = 1;//id\r\n\toptional bool withdraw = 2;//true=取消报名\r\n}\r\n//success/error\r\n\r\n\r\n//----------------CMD  jointour\r\n// Common_I id\r\n\r\n//----------------CMD  back 玩家已经处于away状态\r\n\r\n//----------------CMD  samescore 翻牌前服务器决定\r\nmessage S2C_RummyTour_Samescore{\r\n\trepeated S2C_RummyTour_Card cards = 1;\r\n\trequired int32 win = 2;//赢的玩家 \r\n\tmessage S2C_RummyTour_Card{\r\n\t\trequired int32 playerid = 1; //玩家 \r\n\t\trequired int32 card = 2;//1-13\r\n\t}\r\n}\r\n\r\n"
}